/*!
 * Collapsible helper JS
 * Copyright (c) 2014 Intense Visions, Inc.
 */
/* global jQuery */
!function(a){"use strict";a(document).ready(function(){a(".intense.panel-title").parent().click(function(c){c.preventDefault();var d=a(this).children(".panel-title"),e=d.parent().parent().find(".panel-collapse"),f=a(this).parent().find(".collapse-icon"),g=a(this).parent().find(".expand-icon"),h=d.parents(".intense.panel-group"),i=e.find(".panel-body"),j=h.data("single-toggle");
// fix icon because when it is hidden at first
// the size of the icon is wrong. This corrects the size
return g.addClass("hide"),f.addClass("hide"),e.hasClass("in")?(e.removeClass("in"),g.removeClass("hide"),i.slideUp("fast",function(){a.isFunction(a.fn.isotope)&&d.parents(".isotope").isotope()})):(j&&(h.find(".panel-collapse").removeClass("in"),h.find(".collapse-icon").addClass("hide"),h.find(".expand-icon").removeClass("hide"),h.find(".panel-body").hide()),i.show("fast",function(){a.isFunction(a.fn.isotope)&&d.parents(".isotope").isotope();
// trigger a resize so that maps will reload tiles					
// this won't fix the center or zoom
var b=document.createEvent("UIEvents");b.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(b)}),b(),e.addClass("in"),f.removeClass("hide"),g.addClass("hide")),!1}),a(".intense.panel").each(function(b,c){var d=a(this).find(".panel-collapse"),e=d.find(".panel-body");d.hasClass("in")||(e[0].style.display="none")})});function b(){a("use.stack-base").each(function(){var b=a(this).next(),c=a(this).parent().width(),d=a(this).parent().height();b.attr("width",.5*c),b.attr("height",.5*d);var e=.5*c,f=.5*d;b.attr("x",c/2-e/2),b.attr("y",d/2-f/2),a(this).parent().css("visibility","visible")})}}(jQuery);